<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<link rel="stylesheet" href="css/style.css">
	<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>

	<style>
#container {
  margin: 100px auto;
  width: 1608px;
}

#write {
  margin: 0 0 5px;
  padding: 5px;
  width: 671px;
  height: 200px;
  font: 1em/1.5 Verdana, Sans-Serif;
  background: #fff;
  border: 1px solid #f9f9f9;
  -moz-border-radius: 5px;
  -webkit-border-radius: 5px;
}

#keyboard {
  margin: 0;
  padding: 0;
  list-style: none;
  position: fixed;
  bottom: 15px;
  left: 5%;
  right: 5%;
}

.line {
  display: flex;
  justify-content: space-between;
  width: 100%;
  margin-bottom: 6px;
}

.line__item {
  margin-right: 5px;
  background: #fff;
  /*width: 90%;*/
  position: relative;
  flex-grow: 1;
  /*text-transform: uppercase;*/
  border-radius: 10px;
  font-weight: bold;
}

.line-1:after {
  content: '';
  display: block;
  padding-top: 100%;
}

.line-1 .content {
  position: absolute;
  top: 0;
  left: 0;
}

.content {
  display: flex;
  justify-content: center;
  align-items: center;
  width: 100%;
  height: 100%;
}


.line-2 {
  flex-grow: 2;
}

.line-3 {
  height: 100px;
}

.off {
  display: none;
}

.line__item:hover {
  position: relative;
  top: 1px;
  left: 1px;
  border-color: #e5e5e5;
  cursor: pointer;
}

.uppercase {
  text-transform: uppercase;
}</style>
</head>
<body>

	<div class="klava" id="container">
		<textarea class="klava_result" rows="6" cols="60" id="write"></textarea>	

		<ul  id="keyboard">
	        <li class="line">
	        	<div class="line__item line-1">
					<div class="content symbol">
						<span class="off">`</span><span class="on">~</span>
					</div>
				</div>
				<div class="line__item line-1">
					<div class="content symbol">
						<span class="off">1</span><span class="on">!</span>
					</div>
				</div>
				<div class="line__item line-1">
					<div class="content symbol">
						<span class="off">2</span><span class="on">@</span>
					</div>
				</div>
				<div class="line__item line-1">
					<div class="content symbol">
						<span class="off">3</span><span class="on">#</span>
					</div>
				</div>
				<div class="line__item line-1">
					<div class="content symbol">
						<span class="off">4</span><span class="on">$</span>
					</div>
				</div>
				<div class="line__item line-1">
					<div class="content symbol">
						<span class="off">5</span><span class="on">%</span>
					</div>
				</div>
				<div class="line__item line-1">
					<div class="content symbol">
						<span class="off">6</span><span class="on">^</span>
					</div>
				</div>
				<div class="line__item line-1">
					<div class="content symbol">
						<span class="off">7</span><span class="on">&amp;</span>
					</div>
				</div>
				<div class="line__item line-1">
					<div class="content symbol">
						<span class="off">8</span><span class="on">*</span>
					</div>
				</div>
				<div class="line__item line-1">
					<div class="content symbol">
						<span class="off">9</span><span class="on">(</span>
					</div>
				</div>
				<div class="line__item line-1">
					<div class="content symbol">
						<span class="off">0</span><span class="on">)</span>
					</div>
				</div>
				<div class="line__item line-1">
					<div class="content symbol">
						<span class="off">-</span><span class="on">_</span>
					</div>
				</div>
				<div class="line__item line-1">
					<div class="content symbol">
						<span class="off">=</span><span class="on">+</span>
					</div>
				</div>
				
				<div class="line__item line-2">
					<div class="content delete">
						<span class="lastitem">delete</span>
					</div>
				</div>
	        </li>

	        <li class="line">
	        	<div class="line__item line-2">
					<div class="content tab">tab</div>
				</div>
				<div class="line__item line-1">
					<div class="content letter">q</div>
				</div>
				<div class="line__item line-1">
					<div class="content letter">w</div>
				</div>
				<div class="line__item line-1">
					<div class="content letter">e</div>
				</div>
				<div class="line__item line-1">
					<div class="content letter">r</div>
				</div>
				<div class="line__item line-1">
					<div class="content letter">t</div>
				</div>
				<div class="line__item line-1">
					<div class="content letter">y</div>
				</div>
				<div class="line__item line-1">
					<div class="content letter">u</div>
				</div>
				<div class="line__item line-1">
					<div class="content letter">i</div>
				</div>
				<div class="line__item line-1">
					<div class="content letter">o</div>
				</div>
				<div class="line__item line-1">
					<div class="content letter">p</div>
				</div>
				<div class="line__item line-1">
					<div class="content symbol">
						<span class="off">[</span><span class="on">{</span>
					</div>
				</div>
				<div class="line__item line-1">
					<div class="content symbol">
						<span class="off">]</span><span class="on">}</span>
					</div>
				</div>
				<div class="line__item line-1">
					<div class="content symbol lastitem">
						<span class="off">\</span><span class="on">|</span>
					</div>
				</div>
	        </li>

	        <li class="line">
	        	<div class="line__item line-2">
					<div class="content capslock">Caps Lock</div>
				</div>
				<div class="line__item line-1">
					<div class="content letter">a</div>
				</div>
				<div class="line__item line-1">
					<div class="content letter">s</div>
				</div>
				<div class="line__item line-1">
					<div class="content letter">d</div>
				</div>
				<div class="line__item line-1">
					<div class="content letter">f</div>
				</div>
				<div class="line__item line-1">
					<div class="content letter">g</div>
				</div>
				<div class="line__item line-1">
					<div class="content letter">h</div>
				</div>
				<div class="line__item line-1">
					<div class="content letter">j</div>
				</div>
				<div class="line__item line-1">
					<div class="content letter">k</div>
				</div>
				<div class="line__item line-1">
					<div class="content letter">l</div>
				</div>

				<div class="line__item line-1">
					<div class="content symbol">
						<span class="off">;</span><span class="on">:</span>
					</div>
				</div>
				<div class="line__item line-1">
					<div class="content symbol">
						<span class="off">'</span><span class="on">&quot;</span>
					</div>
				</div>
				<div class="line__item line-2">
					<div class="content">Enter</div>
				</div>
	        </li>

	        <li class="line">
	        	<div class="line__item line-2">
					<div class="content shift">Shift</div>
				</div>
				<div class="line__item line-1">
					<div class="content letter">z</div>
				</div>
				<div class="line__item line-1">
					<div class="content letter">x</div>
				</div>
				<div class="line__item line-1">
					<div class="content letter">c</div>
				</div>
				<div class="line__item line-1">
					<div class="content letter">v</div>
				</div>
				<div class="line__item line-1">
					<div class="content letter">b</div>
				</div>
				<div class="line__item line-1">
					<div class="content letter">n</div>
				</div>
				<div class="line__item line-1">
					<div class="content letter">m</div>
				</div>

				<div class="line__item line-1">
					<div class="content symbol">
						<span class="off">,</span><span class="on">&lt;</span>
					</div>
				</div>

				<div class="line__item line-1">
					<div class="content symbol">
						<span class="off">.</span><span class="on">&gt;</span>
					</div>
				</div>

				<div class="line__item line-1">
					<div class="content symbol">
						<span class="off">/</span><span class="on">?</span>
					</div>
				</div>

				<div class="line__item line-2">
					<div class="content shift">shift</div>
				</div>
	        </li>

	        <li class="line">
	        	<div class="line__item line-3">
					<div class="content space">SPACE</div>
				</div>
	        </li>
		</ul>
	</div>

	<script>
		$(function(){
		    var $write = $('#write'),
		        shift = false,
		        capslock = false;
		     
		    
			$('#keyboard .line__item .content').click(function(){
			    var $this = $(this),
			        character = $this.html(); // If it's a lowercase letter, nothing happens to this variable
			    
			    // Code for processing the key.

			    // Shift keys
		        if ($this.hasClass('shift') || $this.hasClass('shift')) {
		            $('.letter').toggleClass('uppercase');
		            $('.symbol span').toggle();
		             
		            shift = (shift === true) ? false : true;
		            capslock = false;
		            return false;
		        }

		        // Caps lock
		        if ($this.hasClass('capslock')) {
		            $('.letter').toggleClass('uppercase');
		            capslock = true;
		            return false;
		        }

		        // Delete
		        if ($this.hasClass('delete')) {
		            var html = $write.html();
		             
		            $write.html(html.substr(0, html.length - 1));
		            return false;
		        }

		        // Special characters
		        if ($this.hasClass('symbol')) character = $('span:visible', $this).html();
		        if ($this.hasClass('space')) character = ' ';
		        if ($this.hasClass('tab')) character = "\t";
		        if ($this.hasClass('return')) character = "\n";

		        // Uppercase letter
		        if ($this.hasClass('uppercase')) character = character.toUpperCase();
		         
		        // Remove shift once a key is clicked.
		        if (shift === true) {
		            $('.symbol span').toggle();
		            if (capslock === false) $('.letter').toggleClass('uppercase');
		             
		            shift = false;
		        }

		        console.log(character)

		        // Add the character
        		$write.html($write.html() + character);
         
			});
		});

	</script>
</body>
</html>